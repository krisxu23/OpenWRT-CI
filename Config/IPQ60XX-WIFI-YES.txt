# --- 1. 基础架构与设备定义 ---
CONFIG_TARGET_qualcommax=y
CONFIG_TARGET_qualcommax_ipq60xx=y
CONFIG_TARGET_MULTI_PROFILE=y
CONFIG_TARGET_PER_DEVICE_ROOTFS=y
CONFIG_TARGET_DEVICE_qualcommax_ipq60xx_DEVICE_jdcloud_re-ss-01=y
CONFIG_TARGET_DEVICE_PACKAGES_qualcommax_ipq60xx_DEVICE_jdcloud_re-ss-01="ipq-wifi-jdcloud_re-ss-01 zram-swap"

# --- 2. 1G 内存硬改专项优化 (内核级) ---
CONFIG_IPQ_MEM_PROFILE_1024=y
CONFIG_KERNEL_IPQ_MEM_PROFILE=1024
CONFIG_ATH11K_MEM_PROFILE_1024M=y
CONFIG_KERNEL_TRANSPARENT_HUGEPAGE=y
CONFIG_KERNEL_TRANSPARENT_HUGEPAGE_MADVISE=y
CONFIG_KERNEL_SKB_RECYCLER=y
CONFIG_KERNEL_SKB_RECYCLER_MULTI_CPU=y
# 禁用抢占，确保NSS fast-path时序稳定
# CONFIG_KERNEL_PREEMPT is not set
CONFIG_KERNEL_PREEMPT_NONE=y
CONFIG_KERNEL_HIGH_RES_TIMERS=y

# --- 3. 编译与语言优化 (架构相关部分) ---
CONFIG_TARGET_OPTIONS=y
# 稳定优先，使用-O2优化级别
CONFIG_TARGET_OPTIMIZATION="-O2 -pipe -march=armv8-a+crypto+crc -mcpu=cortex-a53+crypto+crc -mtune=cortex-a53"

# --- 4. NSS 硬件加速全开 (精简实用版) ---
# 版本选择：12.5稳定版
CONFIG_NSS_FIRMWARE_VERSION_12_5=y
# 基础功能：IGS、L2TP、SHAPER
CONFIG_NSS_DRV_IGS_ENABLE=y
CONFIG_NSS_DRV_L2TP_ENABLE=y
CONFIG_NSS_DRV_SHAPER_ENABLE=y
# 移除单WAN设备不用的LAG功能
# CONFIG_NSS_DRV_LAG_ENABLE is not set

CONFIG_PACKAGE_kmod-qca-nss-drv=y
CONFIG_PACKAGE_kmod-qca-nss-drv-igs=y
CONFIG_PACKAGE_kmod-qca-nss-drv-l2tpv2=y
# CONFIG_PACKAGE_kmod-qca-nss-drv-lag-mgr is not set
CONFIG_PACKAGE_kmod-qca-nss-drv-pppoe=y
CONFIG_PACKAGE_kmod-qca-nss-drv-qdisc=y
CONFIG_PACKAGE_kmod-qca-nss-drv-bridge-mgr=y
CONFIG_PACKAGE_kmod-qca-nss-ecm=y
CONFIG_PACKAGE_kmod-qca-mcs=y
CONFIG_PACKAGE_sqm-scripts-nss=y

# --- 5. 无线驱动 (重要：firmware与NSS版本需匹配) ---
# 使用标准IPQ60xx firmware，避免实验性EHT特性
CONFIG_PACKAGE_ath11k-firmware-ipq60xx=y
CONFIG_PACKAGE_kmod-ath11k=y
CONFIG_PACKAGE_kmod-ath11k-pci=y
# CONFIG_PACKAGE_wpad-openssl=y (注：wpad已放入通用部分，因为它是用户态软件)

# --- 6. USB支持 (IPQ6018精准匹配 - 控制器层) ---
# IPQ6018硬件：DWC3 + xHCI，无EHCI/OHCI/UHCI/DWC2
CONFIG_PACKAGE_kmod-usb-core=y
CONFIG_PACKAGE_kmod-usb-dwc3=y
CONFIG_PACKAGE_kmod-usb-dwc3-qcom=y
CONFIG_PACKAGE_kmod-usb-xhci=y
CONFIG_PACKAGE_kmod-usb3=y
CONFIG_PACKAGE_kmod-usb-phy-qcom-dwc3=y
CONFIG_PACKAGE_kmod-usb-roles=y
CONFIG_PACKAGE_kmod-usb-phy-nop=y

# --- 13. 禁用与精简 (内核部分) ---
# CONFIG_KERNEL_DEBUG_INFO is not set
# CONFIG_KERNEL_DEBUG_KERNEL is not set
# CONFIG_TARGET_ROOTFS_INITRAMFS is not set
CONFIG_TARGET_ROOTFS_INITRAMFS=n
